{% extends 'main/base.html' %}
{% load static %}
{% load i18n %}

{% block link_css %}
    <link rel="stylesheet" type="text/css" href="{% static 'cart/css/cart_page.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'popup.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'fontawesome/css/fontawesome.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'fontawesome/css/duotone.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'fontawesome/css/solid.css' %}">
{% endblock %}

{% block scripts %}
    <script src="{% static 'cart/js/cart_page.js' %}"></script>
    <script src="{% static 'header.js' %}"></script>
{% endblock %}


{% block header %}
    {% include 'components/header.html' %}
{% endblock %}


{% block footer %}
    {% include 'components/footer.html' %}
{% endblock %}


{% block main %}
    <div class="empty_cart deactive">
        <h3>Вы не добавили в корзину ни одного товара.</h3>
    </div>
    <div class="container">
        <div class="cart_page_wrap deactive">
            <h3 class="cart_page_header">Корзина</h3>
            <div class="product_list"></div>
            <div class="final_price_div">
                <p>Итого: <span class="final_price">0</span> руб.</p>
            </div>
            <div class="pay_btn_div">
                <input type="button" class="cart_pay_btn" value="Перейти к оплате">
            </div>
        </div>
    </div>
{% endblock %}


{% block popup %}
    <div class="popup">
        <div class="popup_content">
            <div class="popup_header" style="justify-content: space-between;">
                <h3>Введите email</h3>
                <i class="fa-duotone fa-xmark fa-xl popup_close"></i>
            </div>

            <form method="dialog" onsubmit="send_pay_form()" class="popup_form" id="pay_form">
                <div class="form_content">

                    <div class="alert">
                        <ul>
                            <!-- TODO errors -->
                        </ul>
                    </div>

                    {% if user.is_authenticated and user.email %}
                        <input type="email" name="email" value="{{user.email}}" id="auth_user_email">
                        <!-- TODO iterate by form with template tag -->
                    {% else %}
                        {% for field in form.without_products %}
                            {{ field }}
                        {% endfor %}
                    {% endif %}

                    {% csrf_token %}
                    <div class="form_content_btns" style="margin-bottom: 10px;">
                        <input type="submit" class="pay_btn" value="Оплатить">
                    </div>
                </div>
            </form>
        </div>
    </div>
{% endblock %}
